var Logs={init:function(){Logs.more()},connectWS:function(){Logs.ws=new ReconnectingWebSocket(logsChannelURL),Logs.ws.onopen=function(){console.log("Connected to logs channel websocket.")},setInterval((function(){}),3e4),Logs.ws.onmessage=function(o){var e=JSON.parse(o.data);if("simple"===e.type)Logs.prependLog(e.key1,e.key2,e.key3,e.data)},Logs.ws.onclose=function(){console.log("Disconnected to logs channel websocket.")},Logs.ws.onerror=function(o){console.log("ERROR",o)}},appendLog:function(o,e,s,n){let t=Logs.sumResult(o,e,s,n);$("#logsContent").append(t)},prependLog:function(o,e,s,n){let t=Logs.sumResult(o,e,s,n);$("#logsContent").prepend(t)},sumResult:function(o,e,s,n){let t="";switch(s){case"增加积分":t='<div style="padding: 5px 0;font-size: 15px;">',t+='【 <span style="color: #696969">'+o+"</span> ",t+='<span style="color: #708090">'+e+"</span> 】<br>",t+='「<span style="color: #99CC66;cursor:pointer" onclick="Logs.more(\''+s+"',1)\">(add)"+s+"</span>」 ",t+='<span style="color: #1E90FF">'+n+"</span> ",t+="</div>";break;case"扣除积分":t='<div style="padding: 5px 0;font-size: 15px;">',t+='【 <span style="color: #696969">'+o+"</span> ",t+='<span style="color: #708090">'+e+"</span> 】<br>",t+='「<span style="color: #FF6666;cursor:pointer" onclick="Logs.more(\''+s+"',1)\">(reduce)"+s+"</span>」 ",t+='<span style="color: #1E90FF">'+n+"</span> ",t+="</div>";break;case"发送弹幕":t='<div style="padding: 5px 0;font-size: 15px;">',t+='【 <span style="color: #696969">'+o+"</span> ",t+='<span style="color: #708090">'+e+"</span> 】<br>",t+='「<span style="color: #FF9900;cursor:pointer" onclick="Logs.more(\''+s+"',1)\">(post)"+s+"</span>」 ",t+='<span style="color: #1E90FF">'+n+"</span> ",t+="</div>";break;default:t='<div style="padding: 5px 0;font-size: 15px;">',t+='【 <span style="color: #696969">'+o+"</span> ",t+='<span style="color: #708090">'+e+"</span> 】<br>",t+='「<span style="color: #6A5ACD;cursor:pointer" onclick="Logs.more(\''+s+"',1)\">(handle)"+s+"</span>」 ",t+='<span style="color: #1E90FF">'+n+"</span> ",t+="</div>"}return t},page:1,more:function(o,e){$.ajax({url:Label.servePath+"/logs/more?page="+(e??Logs.page)+"&pageSize=30&key3="+(o??""),type:"GET",async:!1,success:function(o){if(0===o.code){let s=o.data;e&&1===e&&($("#logsContent").html(""),Logs.page=1),0===s.length?$("#loadMoreBtn").html("没有更多内容了"):s.forEach((o=>{Logs.appendLog(o.key1,o.key2,o.key3,o.data)}))}}}),Logs.page++},reset:function(){Logs.page=1,Logs.more("",1)}};$(document).ready((function(){Logs.init()}));